Menu="NetworkServices"
Type="xmenu"
Title="DVM"
Icon="pie-chart"
Tag="pie-chart"
Markdown="false"
---
<?PHP
/* Copyright Derek Macias (parts of code from NUT package)
 * Copyright macester (parts of code from NUT package)
 * Copyright gfjardim (parts of code from NUT package)
 * Copyright SimonF (parts of code from NUT package)
 * Copyright Mohamed Emad (icon from vnstat-client package)
 * Copyright desertwitch
 *
 * Copyright Dan Landon
 * Copyright Bergware International
 * Copyright Lime Technology
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License 2
 * as published by the Free Software Foundation.
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 */
?>
<? require_once '/usr/local/emhttp/plugins/dwdvm/include/dwdvm_config.php'; ?>

<div> 
<table class="tablesorter shift" border="1">
<thead>
<tr><th>Network Interface</th><th colspan="2">Last 5 Minutes</th><th colspan="2">Last Hour</th><th colspan="2">Last Day</th><th colspan="2">Last Month</th><th colspan="2">Last Year</th></tr>
<tr><th></th><th>INCOMING</th><th>OUTGOING</th><th>INCOMING</th><th>OUTGOING</th><th>INCOMING</th><th>OUTGOING</th><th>INCOMING</th><th>OUTGOING</th><th>INCOMING</th><th>OUTGOING</th></tr>
</thead>
<tbody>
<?if ($dwdvm_running):?>
<?require_once '/usr/local/emhttp/plugins/dwdvm/include/dwdvm_report.php'; build_report_light(); ?>
<?endif;?>
</tbody>
</table>
</div>


<div> 
<table class="tablesorter">
<thead><tr><th>Network Interface</th><th>Summary</th><th>Report by 5 Minutes</th><th>Report by Hours</th><th>Report by Days</th><th>Report by Months</th><th>Report by Years</th></tr></thead>
<tbody>
<?if ($dwdvm_running):?>
<?require_once '/usr/local/emhttp/plugins/dwdvm/include/dwdvm_report.php'; build_report(); ?>
<?endif;?>
</tbody>
</table>
</div>

<script>
$(function() {
    showStatus('vnstatd');

    // dynamix plugin update api
    <?if (function_exists('plugin_update_available') && $version = plugin_update_available('dwdvm')):?>
        showNotice('DVM <?=htmlspecialchars($version);?> available. <a>Update</a>','dwdvm');
        $('#user-notice a').on('click', function () {
        $('#user-notice').empty();
    });
    <?endif;?>
});
</script>
